import{r as t,j as e}from"./index-Cs_QSd-J.js";import{a as u}from"./index-NIGUFBhG.js";function b(){const[i,p]=t.useState(""),[l,h]=t.useState(""),[x,r]=t.useState(!0),[n,c]=t.useState(!1),[a,g]=t.useState(null),[o,j]=t.useState(""),d=async()=>{try{c(!0);const s=await u.post("https://auth.dnjs.lk/api/login",{email:i,password:l});j(s.data.access_token),r(!1)}catch(s){c(!1),console.log("Error:",s.response?.data||s.message),r("Login in unsuccessful")}};return t.useEffect(()=>{o&&u.get("https://auth.dnjs.lk/api/user",{headers:{Authorization:`Bearer ${o}`}}).then(s=>{g(s.data)}).catch(s=>{r("Failed to fetch data properly"),console.error(s)})},[o]),e.jsxs("div",{children:[e.jsx("input",{type:"text",placeholder:"Enter email",value:i,onChange:s=>p(s.target.value),disabled:n}),e.jsx("br",{}),e.jsx("input",{type:"password",placeholder:"Enter password",value:l,onChange:s=>h(s.target.value),disabled:n}),e.jsx("br",{}),e.jsx("p",{onChange:d,children:x}),e.jsx("button",{onClick:d,style:{margin:"10px"},disabled:n,children:"Login"}),a&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:"You have now logged!"}),e.jsxs("p",{children:["Name: ",a.name]}),e.jsx("img",{src:a.avatar,alt:"User Avatar",style:{border:"50%",width:"100px"}}),e.jsxs("p",{children:["Email: ",a.email]}),e.jsxs("p",{children:["Subscribed: ",a.subscribed?"Yes":"No"]}),e.jsx("br",{}),e.jsx("h4",{children:"Data as string:"}),e.jsx("pre",{children:JSON.stringify(a,null,2)})]})]})}export{b as default};
