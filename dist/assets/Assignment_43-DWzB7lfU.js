import{r as a,j as r}from"./index-OaU4KI2l.js";function y(){const f=a.useRef([]),[v,S]=a.useState(0),[h,g]=a.useState({rows:[],fixed:[]}),[l,d]=a.useState({}),[x,p]=a.useState(!1),[i,j]=a.useState(null),z=e=>{if(!f.current[e])return;S(e),d({});const n=f.current[e],t=Array(n.height).fill(null).map((o,s)=>Array(n.width).fill(null).map((c,u)=>{const A=n.fixed.find(m=>m.x===u&&m.y===s);return{x:u,y:s,node:`${u}-${s}`,fixed:A}}));g({rows:t,fixed:n.fixed})},N=e=>{i||(p(!0),d({[e.node]:1}))},P=e=>{if(!x||i)return;const n=Object.keys(l),t=n.indexOf(e.node);if(t>-1){const o=n.slice(0,t+1),s={};o.forEach(c=>{s[c]=l[c]}),d(s)}else{const o=n.length+1;d(s=>({...s,[e.node]:o}))}},w=()=>{if(!x||i)return;p(!1);const e=h.rows.length*h.rows[0].length,n=Object.keys(l).length===e,t=h.fixed.every(s=>l[`${s.x}-${s.y}`]===s.value),o=n&&t;j({success:o}),setTimeout(()=>{if(j(null),o){const s=f.current[v+1]?v+1:0;z(s)}else d({})},1200)};return a.useEffect(()=>{fetch("./Assignment_43.json").then(e=>e.json()).then(e=>{f.current=e,z(0)}).catch(e=>console.error("Failed to load levels:",e))},[]),r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"puzzle-level",children:["Level ",v+1]}),r.jsx("div",{className:"puzzle-outer",children:r.jsx("div",{className:"puzzle",onPointerUp:w,onPointerLeave:w,"data-result":!!i,"data-success":i?.success,children:h.rows.map((e,n)=>r.jsx("div",{className:"puzzle-row",children:e.map((t,o)=>{const s=l[t.node],c=!!t.fixed,u=c&&t.fixed.value===s;return r.jsx("div",{onPointerDown:()=>N(t),onPointerEnter:()=>P(t),className:"puzzle-cell","data-fixed":c,"data-drawn":t.node in l,"data-match":u,children:c?t.fixed.value:s},o)})},n))})})]})}export{y as default};
