import{r as d,j as a}from"./index-DyrN4jHA.js";const f=3,i=3;function A(){const[u,h]=d.useState([]),[v,x]=d.useState(null),[g,w]=d.useState();d.useEffect(()=>{h(Array(f).fill().map(()=>Array(i).fill()))},[]),d.useEffect(()=>{const n=Array.from({length:f*i},(e,l)=>l),s=(e=>{for(let l=e.length-1;l>0;l--){const c=Math.floor(Math.random()*(l+1));[e[l],e[c]]=[e[c],e[l]]}return e})(n),t=[];for(let e=0;e<f;e++)t.push(s.slice(e*i,(e+1)*i));h(t);const o=s[Math.floor(Math.random()*s.length)];x(o),w(!1)},[]);const y=()=>{for(let n=0;n<f;n++)for(let r=0;r<i;r++)if(u[n][r]===v)return{row:n,col:r};return null},k=n=>{const r=n.flat();for(let s=0;s<r.length-1;s++)if(r[s]!==s)return!1;return!0};d.useEffect(()=>{const n=r=>{const s=y();if(!s)return;const{row:t,col:o}=s,e=u.map(c=>[...c]),l=(c,j,m,p)=>{[e[c][j],e[m][p]]=[e[m][p],e[c][j]],h(e),x(e[m][p]),w(k(e))};switch(r.key.toLowerCase()){case"arrowup":case"w":t<f-1&&l(t,o,t+1,o);break;case"arrowdown":case"s":t>0&&l(t,o,t-1,o);break;case"arrowleft":case"a":o<i-1&&l(t,o,t,o+1);break;case"arrowright":case"d":o>0&&l(t,o,t,o-1);break}};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[u]);const b=()=>{console.log("Retry button clicked"),w(!1)};return a.jsx("div",{children:a.jsx("div",{className:"container",children:a.jsxs("div",{className:"puzzle","data-solved":g?"true":"false",children:[u.map((n,r)=>a.jsx("div",{className:"row",children:n.map((s,t)=>{const o=s%i*(400/i),e=Math.floor(s/i)*(400/f);return a.jsx("div",{className:"tile",style:{backgroundPosition:`-${o}px -${e}px`,visibility:s===v?"hidden":"visible"}},t)})},r)),g&&a.jsxs("div",{className:"image-overlay",children:[a.jsx("img",{src:"./sliding-puzzle.jpg"}),a.jsx("button",{className:"retry-button",onClick:b,children:"Retry"})]})]})})})}export{A as default};
