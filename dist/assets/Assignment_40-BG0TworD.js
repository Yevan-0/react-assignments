import{r as e,j as n}from"./index-OaU4KI2l.js";function C(){const[s,v]=e.useState(!1),[x,R]=e.useState(0),[p,i]=e.useState(0),[j,f]=e.useState(0),[b,E]=e.useState(0),[w,m]=e.useState(!1),c=e.useRef(null),o=e.useRef(null),a=e.useRef(null),g=t=>{console.log("gamma:",t.gamma);const l=t.gamma?Number(t.gamma).toPrecision(3):0;R(l)},y=async()=>{if(typeof DeviceOrientationEvent<"u"&&typeof DeviceOrientationEvent.requestPermission=="function")try{await DeviceOrientationEvent.requestPermission()==="granted"&&window.addEventListener("deviceorientation",g)}catch(t){console.error("Permission request failed:",t)}else typeof DeviceOrientationEvent<"u"&&window.addEventListener("deviceorientation",g)};return e.useEffect(()=>{if(!s)return;const t=setInterval(()=>{f(l=>{const h=l+5;if(c.current&&o.current&&a.current){const r=c.current.getBoundingClientRect(),u=o.current.getBoundingClientRect(),d=a.current.getBoundingClientRect();if(r.bottom>=u.top&&r.right>=u.left&&r.left<=u.right&&!w)return E(S=>S+1),m(!0),i(Math.random()*(d.width-30)),0;if(h+r.height>d.height)return m(!1),i(Math.random()*(d.width-30)),0}return h})},30);return()=>clearInterval(t)},[s]),e.useEffect(()=>{if(s&&a.current){const t=a.current.getBoundingClientRect();i(Math.random()*(t.width-50)),f(0)}},[s]),n.jsx("div",{children:s?n.jsxs("div",{className:"game",children:[n.jsxs("div",{className:"score",children:["Score: ",b]}),n.jsxs("div",{className:"container",ref:a,children:[n.jsx("div",{ref:c,className:"balls",style:{transform:`translate(${p}px, ${j}px)`}}),n.jsx("div",{ref:o,className:"basket",style:{transform:`translateX(${x*5}px)`}})]})]}):n.jsxs("div",{className:"home-page",children:[n.jsx("div",{className:"header",children:"BALL FALL"}),n.jsx("button",{onClick:()=>{v(!0),y()},children:"Start"})]})})}export{C as default};
